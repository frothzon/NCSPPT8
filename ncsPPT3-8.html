<!DOCTYPE HTML>
<html>
<head>
<title>
ncsPPT
</title>
</head>
<body>


<style>
div
{
background: 
  /* On "top" */
  repeating-linear-gradient(
    46.5deg,
    transparent,
    transparent 8px,
    #fff 10px,
    #a66 20px
  ),
  /* on "bottom" */
  linear-gradient(
    to bottom,
    #caa,
    #fff,
	#caa
  );
  
  
color: red;
-webkit-text-stroke: 0 black;
text-shadow:
       1px 1px 1px #000;
}
td
{
color: white;
-webkit-text-stroke: .5px black;
text-shadow:
       2px 2px 0 #000;
}
body
{
background: 
  /* On "top" */
  repeating-linear-gradient(
    46.5deg,
    transparent,
    transparent 12px,
    #88f 10px,
    #ccc 20px
  ),
  /* on "bottom" */
  linear-gradient(
    to bottom,
    #55f,
    #fff,
	#55f
  );
 font-family: Tahoma, Geneva, sans-serif;
}
table{
background: 
  /* On "top" */
  repeating-linear-gradient(
    46.5deg,
    transparent,
    transparent 14px,
    #88f 10px,
    #77f 20px
  ),
  /* on "bottom" */
  linear-gradient(
    to bottom,
    #77f,
    #44f,
	#77f
  );
 border-style:outset;
 
}
</style>

<center>
<br>
<br>
<table border="5" bordercolor="blue" bgcolor=#4d94ff><td>
<h1>
<center>
Password Generator
</center>
</h1>
<br>
<br>

<table border="3" bordercolor="black" bgcolor=#0066ff>

<th>Password</th>
<th>Code Seed</th>
</tr>
<tr>
<td><input type="text" id="myText" value="-MyPass-"></td>
<td><input type="text" id="myCode" value="sp3078"></td>

</table>
<br>
<center>
<table border="1" bordercolor="red" bgcolor=#fff2e6>

<td><div>
Use special characters
</td></div>
<th>
 <input type="checkbox" id="myCheck">
 </th>
 
</tr>
<tr>

</center></table><br><br>

<input type="text" id="myOut" value="-copy output text here -">


<h3>Click to Encode</h3>

<button onclick="runApp()">Encrypt</button>

<br>
<br>
</td></table>
</center>



<script>

var input_text = "";				/// input password
var output_text = "";				/// output password
var input_seed = "";				/// shift seed
var offset = 0;						/// total offset
var curr_value = new Array();		/// summation of current values
var input_nums = new Array();		/// store input text as pointers
var seed_nums = new Array();		/// store seed text as pointers
var sum_nums = 0;					/// sum up all the numbers

var input_check = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_-";
const out_letters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
var out_chars = "0123456789!@#$&_-()";


/*
reset arrays
*/
function clearArrays()
{
	sum_nums = 0;
	curr_value = zeroArray(input_text.length);
	input_nums = zeroArray(input_text.length);
	seed_nums = zeroArray(input_seed.length);
	offset = 0;
}

function zeroArray(number){
	var tempArray = new Array(number);
	for(var i = 0; i < number; i++){
		tempArray[i] = 0;
	}
	return(tempArray);
}

function scramble(scramString){
	var stringArray = scramString.split("");
	/// scramble based on seed
	for(var i = 0; i < scramString.length; i++){
		var _ind1 = input_seed.charCodeAt(i%input_seed.length),
			_ind2 = ((i+input_seed.length)*Math.pow(17,i))%scramString.length;
		var _temp = stringArray[_ind1];
		stringArray[_ind1] = stringArray[_ind2];
		stringArray[_ind2] = _temp;
	}
	scramString = stringArray.join("");
	return(scramString);
}

/*
setup arrays
*/
function populateArrays()
{
	input_text = scramble(input_text);
	console.log(input_text);
	for(u = 0; u < input_text.length; u++)
	{
		var _currentChar = input_text.charAt(u),
			_indexInPool = input_check.indexOf(_currentChar);
		if(_indexInPool != -1){
			input_nums[u] = _indexInPool;
			curr_value[u] += _indexInPool;
			offset += _indexInPool;
			sum_nums += input_text.charCodeAt(u)*Math.pow(17,u+1)*(input_text.length+1-u);
			/// add ceaser cypher value based on ASCII value of letter
			var u2 = u%input_seed.length;
			curr_value[u] += input_seed.charCodeAt(u2);
		}
	}
}

/*
encrypt password
*/
function incryptPassword()
{
	//var temp_text = "";
	output_text = "";
	/// sum_nums adds a large number to the offset depending on the length of input value and the index by doing an exponential operation
	/// using a constant base raised to the power of the index and multiplied by the ascii value of the character
	offset += sum_nums;
	/// combine letteres and numbers in output text string through a complicated algorithm
	/// adding an offset, the current index, and 2 values associated caeser cypher using a seed (direct, and incremental)
	for(i = 0; i < input_text.length; i++)
	{
		var i2 = i%seed_nums.length;
		var temp_val = (input_nums[i] + curr_value[i] + Math.pow(2,seed_nums[i2]) + offset + i)%out_letters.length;
		output_text += out_letters.charAt(temp_val);
		/// add numbers
		temp_val = (input_nums[i] + curr_value[i] + Math.pow(2,seed_nums[i2]) + offset + i)%out_chars.length;
		output_text += out_chars.charAt(temp_val);
	}
	output_text = scramble(output_text);
}

/// MAIN function of the program
function runApp(){
	/// check if special characters are required
	/// change the numbers out with special characters if true
	var x = document.getElementById("myCheck");
	if(x.checked == false){
		out_chars = "0123456789012345678";
	} else {
		out_chars = "0123456789!@#$&_-()";
	}
		
	/// grab the input values for the password and seed
	input_text = document.getElementById("myText").value;
	input_seed = document.getElementById("myCode").value;

	/// clear out old data for new passwords
	clearArrays();

	/// grab ceaser cypher data and put it in an array with the same length of the password
	populateArrays();

	/// apply cypher, offset, and array index offset and turn the math into letters and numbers/symbols
	incryptPassword();

	/// send the incrypted string to the output in the document
	document.getElementById("myOut").value = output_text;
}


</script>


</body>
</html>
